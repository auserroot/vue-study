<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button onclick="handleclick('news')">新闻</button>
    <button onclick="handleclick('map')">地图</button>
    <div class="txt"></div>
    <script>
        // console.log(window.history.pushState)
        let pushState = window.history.pushState;
        let txt = document.querySelector('.txt');
        //方法重写
        window.history.pushState = function(state,title,url){
            let urlval = url.slice(1);
            switch(urlval){
                case "news": txt.innerHTML="新闻"
                break;
                case "map": txt.innerHTML= "地图"
                break;
            }
            pushState.call(this,state,title,url)
        };
        function handleclick(active){
            console.log(active)
            window.history.pushState({},"新闻","/"+active)
            console.log(window.history)
        }
        window.addEventListener("popstate",function(){
            console.log(1)
        })
    </script>
</body>
</html>